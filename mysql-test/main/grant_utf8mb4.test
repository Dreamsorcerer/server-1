-- source include/not_embedded.inc

--echo #
--echo # Start of 11.7 tests
--echo #

--echo #
--echo # MDEV-27490 Allow full utf8mb4 for identifiers
--echo #

SET NAMES utf8mb4;

CREATE USER ðŸ˜Ž@localhost;
CREATE DATABASE ðŸ˜Ž;
CREATE TABLE ðŸ˜Ž.ðŸ˜Ž (ðŸ˜Ž INT);
CREATE FUNCTION ðŸ˜Ž.ðŸ˜Ž (ðŸ˜Ž INT) RETURNS TEXT RETURN 'ðŸ˜Ž';

GRANT BINLOG MONITOR ON *.* TO ðŸ˜Ž@localhost;
SELECT host, user FROM mysql.global_priv WHERE user='ðŸ˜Ž';
REVOKE BINLOG MONITOR ON *.* FROM ðŸ˜Ž@localhost;
SELECT host, user FROM mysql.global_priv WHERE user='ðŸ˜Ž';

GRANT SELECT (ðŸ˜Ž) ON ðŸ˜Ž.ðŸ˜Ž TO ðŸ˜Ž@localhost;
SELECT * FROM mysql.columns_priv;
REVOKE SELECT (ðŸ˜Ž) ON ðŸ˜Ž.ðŸ˜Ž FROM ðŸ˜Ž@localhost;
SELECT * FROM mysql.columns_priv;

GRANT ALL PRIVILEGES ON ðŸ˜Ž.ðŸ˜Ž TO ðŸ˜Ž@localhost;
SELECT * FROM mysql.tables_priv;
REVOKE ALL PRIVILEGES ON ðŸ˜Ž.ðŸ˜Ž FROM ðŸ˜Ž@localhost;
SELECT * FROM mysql.tables_priv;

GRANT ALL PRIVILEGES ON ðŸ˜Ž.* TO ðŸ˜Ž@localhost;
SELECT * FROM mysql.db;
REVOKE ALL PRIVILEGES ON ðŸ˜Ž.* FROM ðŸ˜Ž@localhost;
SELECT * FROM mysql.db;

GRANT EXECUTE ON FUNCTION ðŸ˜Ž.ðŸ˜Ž TO ðŸ˜Ž@localhost;
SELECT * FROM mysql.procs_priv;
REVOKE EXECUTE ON FUNCTION ðŸ˜Ž.ðŸ˜Ž FROM ðŸ˜Ž@localhost;
SELECT * FROM mysql.procs_priv;

CREATE ROLE ðŸ˜Ž WITH ADMIN ðŸ˜Ž@localhost;
SELECT * FROM mysql.roles_mapping;
DROP ROLE ðŸ˜Ž;
SELECT * FROM mysql.roles_mapping;

DROP FUNCTION ðŸ˜Ž.ðŸ˜Ž;
DROP TABLE ðŸ˜Ž.ðŸ˜Ž;
DROP DATABASE ðŸ˜Ž;
DROP USER ðŸ˜Ž@localhost;
USE test;

--echo #
--echo # End of 11.7 tests
--echo #
