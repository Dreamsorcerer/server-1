#
# Start of 11.7 tests
#
#
# MDEV-27490 Allow full utf8mb4 for identifiers
#
SET NAMES utf8mb4;
CREATE USER ðŸ˜Ž@localhost;
CREATE DATABASE ðŸ˜Ž;
CREATE TABLE ðŸ˜Ž.ðŸ˜Ž (ðŸ˜Ž INT);
CREATE FUNCTION ðŸ˜Ž.ðŸ˜Ž (ðŸ˜Ž INT) RETURNS TEXT RETURN 'ðŸ˜Ž';
GRANT BINLOG MONITOR ON *.* TO ðŸ˜Ž@localhost;
SELECT host, user FROM mysql.global_priv WHERE user='ðŸ˜Ž';
host	user
localhost	ðŸ˜Ž
REVOKE BINLOG MONITOR ON *.* FROM ðŸ˜Ž@localhost;
SELECT host, user FROM mysql.global_priv WHERE user='ðŸ˜Ž';
host	user
localhost	ðŸ˜Ž
GRANT SELECT (ðŸ˜Ž) ON ðŸ˜Ž.ðŸ˜Ž TO ðŸ˜Ž@localhost;
SELECT * FROM mysql.columns_priv;
Host	Db	User	Table_name	Column_name	Timestamp	Column_priv
localhost	ðŸ˜Ž	ðŸ˜Ž	ðŸ˜Ž	ðŸ˜Ž	0000-00-00 00:00:00	Select
REVOKE SELECT (ðŸ˜Ž) ON ðŸ˜Ž.ðŸ˜Ž FROM ðŸ˜Ž@localhost;
SELECT * FROM mysql.columns_priv;
Host	Db	User	Table_name	Column_name	Timestamp	Column_priv
GRANT ALL PRIVILEGES ON ðŸ˜Ž.ðŸ˜Ž TO ðŸ˜Ž@localhost;
SELECT * FROM mysql.tables_priv;
Host	Db	User	Table_name	Grantor	Timestamp	Table_priv	Column_priv
localhost	mysql	mariadb.sys	global_priv	root@localhost	0000-00-00 00:00:00	Select,Delete	
localhost	ðŸ˜Ž	ðŸ˜Ž	ðŸ˜Ž	root@localhost	0000-00-00 00:00:00	Select,Insert,Update,Delete,Create,Drop,References,Index,Alter,Create View,Show view,Trigger,Delete versioning rows	
REVOKE ALL PRIVILEGES ON ðŸ˜Ž.ðŸ˜Ž FROM ðŸ˜Ž@localhost;
SELECT * FROM mysql.tables_priv;
Host	Db	User	Table_name	Grantor	Timestamp	Table_priv	Column_priv
localhost	mysql	mariadb.sys	global_priv	root@localhost	0000-00-00 00:00:00	Select,Delete	
GRANT ALL PRIVILEGES ON ðŸ˜Ž.* TO ðŸ˜Ž@localhost;
SELECT * FROM mysql.db;
Host	Db	User	Select_priv	Insert_priv	Update_priv	Delete_priv	Create_priv	Drop_priv	Grant_priv	References_priv	Index_priv	Alter_priv	Create_tmp_table_priv	Lock_tables_priv	Create_view_priv	Show_view_priv	Create_routine_priv	Alter_routine_priv	Execute_priv	Event_priv	Trigger_priv	Delete_history_priv	Show_create_routine_priv
localhost	ðŸ˜Ž	ðŸ˜Ž	Y	Y	Y	Y	Y	Y	N	Y	Y	Y	Y	Y	Y	Y	Y	Y	Y	Y	Y	Y	Y
REVOKE ALL PRIVILEGES ON ðŸ˜Ž.* FROM ðŸ˜Ž@localhost;
SELECT * FROM mysql.db;
Host	Db	User	Select_priv	Insert_priv	Update_priv	Delete_priv	Create_priv	Drop_priv	Grant_priv	References_priv	Index_priv	Alter_priv	Create_tmp_table_priv	Lock_tables_priv	Create_view_priv	Show_view_priv	Create_routine_priv	Alter_routine_priv	Execute_priv	Event_priv	Trigger_priv	Delete_history_priv	Show_create_routine_priv
GRANT EXECUTE ON FUNCTION ðŸ˜Ž.ðŸ˜Ž TO ðŸ˜Ž@localhost;
SELECT * FROM mysql.procs_priv;
Host	Db	User	Routine_name	Routine_type	Grantor	Proc_priv	Timestamp
localhost	ðŸ˜Ž	ðŸ˜Ž	ðŸ˜Ž	FUNCTION	root@localhost	Execute	0000-00-00 00:00:00
REVOKE EXECUTE ON FUNCTION ðŸ˜Ž.ðŸ˜Ž FROM ðŸ˜Ž@localhost;
SELECT * FROM mysql.procs_priv;
Host	Db	User	Routine_name	Routine_type	Grantor	Proc_priv	Timestamp
CREATE ROLE ðŸ˜Ž WITH ADMIN ðŸ˜Ž@localhost;
SELECT * FROM mysql.roles_mapping;
Host	User	Role	Admin_option
localhost	ðŸ˜Ž	ðŸ˜Ž	Y
DROP ROLE ðŸ˜Ž;
SELECT * FROM mysql.roles_mapping;
Host	User	Role	Admin_option
DROP FUNCTION ðŸ˜Ž.ðŸ˜Ž;
DROP TABLE ðŸ˜Ž.ðŸ˜Ž;
DROP DATABASE ðŸ˜Ž;
DROP USER ðŸ˜Ž@localhost;
USE test;
#
# End of 11.7 tests
#
